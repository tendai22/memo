# 6809/09Eの差分ピン

|Pin#|09name|09Ename|
|--|--|--|
|33|**DMA/BREQ[IN]**: DMA/BREQ 入力は、図 12 に示すように、実行を一時停止し、MPU バスを別の用途のために使用するた めのものである。代表的な用途は、DMA やダイナミック・メモリ・リフレッシュである。<br>DMA/BREQの遷移はQ中に発生する。このピンがLレベルになると現在のサイクルの最後で命令実行を停止する。MPUはBAとBSをハイレベルにすることによりDMA/BREQを認識します。HD6809で実行されたオートリフレッシュはHD6309では実行されません。図13を参照してください。<br>通常、DMA コントローラは E の立ち上がりエッジで DMA/BREQ 端子をロー・アサートしてバス の使用を要求し、MPU が BA、BS を 1 にして応答すると、そのサイクルは DMA コントローラにバスのマスタリ ングを移すためのデッド・サイクルとなる。<br>BAが変化したサイクルでLowになるシステムDMÄVMA信号を開発することで、デッドサイクル中の偽メモリアクセスを防ぐことができる。<br>BAがLowになる(DMA/BREQがHighになる)と、MPUがメモリにアクセスする前に別のデッド・サイクルが経過し、競合なしにバスのマスタシップを転送できるようになる。<br>DMA/BREQ入力はリセット状態の間Highに接続する。|**BUSY[OUT]**: BUSYは、リード-モディファイ-ライト命令のリードサイクルおよびモディファイサイクル、ならびにダブルバイト演算(LDX、STD、ADDDなど)の最初のバイトのアクセス中に "High"になります。また、間接命令やその他のベクタフェッチ(ジャンプ拡張命令、SWI間接命令など)の最初のバイトのアクセス中もビジーは "High"になります。<br>マルチプロセッサシステムでは、BUSYは、上記の動作の完全性を保証するために、次のバスサイクルの再調停を延期する必要性を示す。この違いにより、いくつかのリードモディファイライト命令のいずれかを使用して、「テストアンドセット」プリミティブに必要な分割不可能なメモリアクセスが提供される。<br>ビジーはPSHまたはPUL動作中にはアクティブにならない。典型的な読み出し-変更-書き込み命令(ASL)を図 12 に示す。タイミング情報を図 13 に示す。ビジーはQの立ち上がりエッジのtcp後に有効になります。|
|36|**MRDY[IN]:** この入力制御信号により、EとQを伸ばしてデータ・アクセス時間を延長することができます。MRDY が H の間、E と Q は正常に動作します。MRDY がローの時、E と Q はハーフ（1/2）バス・サイクルの整数倍で伸張することができ、図 11 に示すように低速メモリへのインターフェイスが可能になります。最大ストレッチは5マイクロ秒である。<br>非有効メモリ・アクセス（VMAサイクル）の間、MRDYはEとQの伸張に影響しない。これは、「don't care」バス・アクセスの間にプロセッサを遅くすることを抑制する。 MRDYは、バス制御が（HALTやDMA/BREQを使用して）外部デバイスに転送された場合に、（低速メモリ用に）クロックをストレッチするために使用することもできる。<br>MRDY はまた、デッドサイクル中に E と Q をストレッチします。|**AVMA[OUT]:** AVMAはAdvanced VMA信号で、MPUが次のバスサイクルでバスを使用することを示す。AVMA 信号の予測特性により、効率的な共有バスマルチプロセッサシステムが可能となる。AVMAはMPUがHALTまたはSYNC状態の時に "Low "になります。AVMAはQの立ち上がりエッジのtcp後に有効となる。|
|38|**EXTAL[IN]**: これらの2つのピンは、並列抵抗基本水晶振動子、ATカットで接続されます。また、EXTALピンは、XTALをフローティングにして外部タイミング用のTTLレベル入力として使用することもできます。水晶振動子または外部周波数はバス周波数の4倍です。図 4 を参照。プリント回路基板のレイアウトには、適切なRFレイアウト技術を遵守する必要があります。|**LIC[OUT]:** LIC(Last Instruction Cycle)は、各命令の最終サイクルで "High "となり、"High "から "Low "への遷移は、現バスサイクルの終 了時にオペコードの先頭バイトがラッチされることを示す。LICは、MPUが命令終了時に停止している時(CWAIやRESET中でない時)、SYNC状態または割り込み中スタック中に "High "となる。LICはQの立ち上がりエッジからtcp後に有効となる。|
|39|**XTAL[IN]:** 外部クロック使用時はOPENにする。|**TSC[IN]:** TSC(スリーステートコントロール)はMOSアドレス、データ、R/Wバッファをハイインピーダンス状態にする。制御信号(BA、BS、BUSY、AVMA、LIC)はハイインピーダンス状態にならない。TSC は、1 つのバスを他のバスマスタ(プロセッサまたは DMA コントローラ)と共有できるようにするためのものである。<br>Eが "Low "の間、TSCはアドレスバッファとR/Wを直接制御する。書き込み動作中のデータバスバッファは、Qが立ち上がるまでハイインピーダンス状態にある。TSCがEの立ち上がりエッジを超えて保持された場合、TSCは内部でラッチされ、バスドライバはバスサイクルの残りの期間、ハイインピーダンス状態を維持する。図14を参照。|